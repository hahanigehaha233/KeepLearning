##<center> Schema与数据类型以及优化 </center>
### 1.基本数据类型
#### 1.1 字符型数据
- char：0-255字节，定长字符串，会使用空格进行右填充。
- varchar：0-65535，变长字符串

当超过64kb时，就需要使用文本类型。
- tinytext：0-255字节，短文本字符串
- text：0-65535字节，长文本数据
- mediumtext:0-16777215 中等长度文本
- longtext:0-4294967295 极大文本

#### 1.2 数值型数据
|类型|字节|带符号的范围|无符号的范围|
-|-|-|-
|tinyint|1|-128~127|0~255|
|smallint|2|-32768~32767|0~65535|
|mediumint|3|-8 388 608~8 388 607|0~16 777 215|
|int|4|-2 147 483 648~2 147 483 647|0~4 294 967 295|
|bigint|8|

浮点型
|类型|字节|
-|-
|float|4|
|double|8|
|decimal|取决于参数M,D用于存储精确小数|

#### 1.3时间数据
|类型|默认格式|允许的值|
-|-|-
|date|YYYY-MM-DD|1000-01-01~9999-12-31|
|datetime|YYYY-MM-DD HH:MI:SS|1000-01-01 00:00:00 ~ 9999-12-31 23:59:59|
|timestamp|YYYY-MM-DD HH:MI:SS|1970-01-01 00:00:00 ~ 2037-12-31 23:59:59|
|year|YYYY|1901 ~ 2155|
|time|HHH:MI:SS|-838:59:59 ~ 838:59:59|

### 2.数据类型的选择
#### 更小的通常更好
一般情况下，应该尽量使用可以正确存储数据的最小数据类型。更小意味着更快，因为它们占用更少的磁盘、内存和CPU缓存。
#### 简单就好
简单的数据类型意味着更少的CPU周期，例如：整型比字符操作代价更低，因为字符集合校对规则使得字符比较比整型更加复杂。
#### 尽量避免NULL
列默认是可以为NULL的，需要`Not NULL`进行设定，如果在查询中包含NULL的话，对MySQL来说是很难进行优化的，因为NULL在索引、值比较中都更加复杂，可为NULL的话索引记录中需要一个额外的字节。
#### 时间类型的选择
- 用于存储预计客户订单发送时间和雇员出生日期的列可以使用date类型，因为将调度发送订单的时间是不可能精确到分秒的。
- 用于存放客户订单实际被发送的信息列可以为datetime类型，因为不仅需要跟踪发送的日期，记录发送的具体时间也很重要。
- 记录用户何时修改表中特定行可以使用timestamp类型。timestamp保存的信息与datetime类型一样，但是MySQL服务器可以在向表中增加或修改数据行时自动为timestamp列产生当前的时间。
- 只需要年份数据的年可以使用year类型。
- 存放完成某项任务所花费时间可以使用time类型。这种类型的数据无法表示具体的日期，但本例只对完成任务所花费的小时/分钟/秒数感兴趣。

#### CARCHAR和CHAR类型
- VARCHAR： 用于存储可变长字符串，是最常见的字符串数据类型。它比定长类型更节省空间，因为它只使用必要的空间。

  VARCHAR需要1或2个额外字节记录字符串的长度：如果列的最大长度小于或者等于255字节，则只需要使用1个字节表示，否则使用两个字节

  这会导致一个问题，在UPDATE操作时如果增加长度，会增加额外的工作。

  下面这些情况使用VARCHAR是合适的：字符串列的最大长度比平均长度大很多；列的更新少，所以碎片不是问题；使用了像UTF-8这样的复杂的字符集，每个字符都使用不同的字节数进行存储。
- CHAR：定长类型，总是会根据定义的字符串长度分配足够的空间。当存储CHAR值时，MuSQL会删除所有末尾空格，CHAR值会根据需要进行填充。

  CHAR适合存储很短的字符串，或者所有的值接近同一个长度，例如，MD5值，或者是经常需要变化的值。

#### BLOB和TEXT
BLOB和TEXT都是为了存储很大的数据而设计的字符串数据类型，分别采用二进制和字符方式存储。与其他类型不同的是，MySQL把每个BLOB和TEXT值当做一个独立的对象处理。存储引擎在存储时通常会做特殊操作。当值太大时，InnoDB会使用专门的“外部”存储区域来进行存储，此时每个值需要1~4个字节存储一个指针，然后在外部存储区域存储实际的值。

排序也只针对最前面的1024个字节进行排序，可以配置。

#### 枚举类型
有时候可以通过使用枚举列代替常用的字符串类型。枚举列可以把一些不重复的字符串存储成一个预定义的集合。MySQL在存储枚举时非常紧凑，会根据列表值得数量压缩到一个或者两个字节中。MySQL会在内部会将每个值在列表中的位置保存为整数，并且在.frm文件中保存“数字-字符串”映射关系的“查找表”

**注意**：枚举类型排序是按照定义顺序进行排序，因此在定义时尽量按照字母表进行排序。

主键通过枚举代替VARCHAR会更快。

#### 位数据类型（待补充）
